<!DOCTYPE html>
<html lang="en">
<head>
    <!-- IMPORTANT: Make sure your text editor saves this file with UTF-8 Encoding! -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCIE 1012 Chapter 2 Quiz</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="email"], input[type="tel"], input[type="password"] { width: 100%; padding: 8px; box-sizing: border-box; }
        input[type="radio"] { margin-right: 5px; vertical-align: middle;} /* Align radio buttons */
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; cursor: pointer; margin-right: 10px; border-radius: 5px; }
        button:hover { background-color: #0056b3; }
        .hidden { display: none; }
        #error-message, #password-error, #login-error { color: red; font-size: 1.2em; text-align: center; }
        #success-message { color: green; font-size: 1.2em; text-align: center; }
        #results, #review-section, #submission-copy { margin-top: 20px; text-align: left; border: 1px solid #ccc; padding: 15px; border-radius: 5px; background-color: #f9f9f9;}
        #password-section, #login-section { text-align: center; max-width: 400px; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 5px; background-color: #f9f9f9;}
        #password-section input[type="password"], #login-section input[type="text"], #login-section input[type="password"] { width: calc(100% - 18px); }
        .question-result { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        #download-pdf, #download-response { margin-top: 10px; }
        #score { font-weight: bold; text-align: center; color: green; font-size: 1.4em; margin-top: 20px; }
        #review-section h2, #submission-copy h2, #results h1 { margin-bottom: 15px; text-align: center; color: #007bff;}
        #review-section button, #submission-copy button, #password-section button, #login-section button, #results button { margin-top: 15px; }
        .choices p { margin: 2px 0 2px 20px; }
        /* Style for radio button labels */
        .form-group span { display: inline-block; margin-left: 3px; margin-right: 15px;}
    </style>
</head>
<body>
    <div id="login-section">
        <h1>Login to Access Quiz</h1>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" placeholder="Enter username" required>
        </div>
        <div class="form-group">
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" placeholder="Enter password" required>
        </div>
        <button onclick="checkLogin()">Login</button>
        <p id="login-error" class="hidden">Incorrect username or password. Please try again.</p>
    </div>

    <div id="quiz-form" class="hidden">
        <h1>MCIE 1012 Chapter 2 Quiz</h1>
        <form id="mcie-quiz-ch2" method="POST">
            <!-- Student Information -->
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="id_number">ID Number:</label>
                <input type="text" id="id_number" name="id_number" required>
            </div>
            <div class="form-group">
                <label for="section">Section:</label>
                <input type="text" id="section" name="section" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>

            <hr> <!-- Separator -->
            <h2>Chapter 2 Questions</h2>

            <!-- MCIE Chapter 2 Multiple-Choice Questions - Corrected Apostrophes -->
            <div class="form-group">
                <label>1. What is the primary focus of normative ethics?</label>
                <input type="radio" name="q1" value="A" required><span>A) Defining the meaning of moral terms</span><br>
                <input type="radio" name="q1" value="B"><span>B) Studying the nature of moral judgments</span><br>
                <input type="radio" name="q1" value="C"><span>C) Providing guidelines for what people should do</span><br>
                <input type="radio" name="q1" value="D"><span>D) Analyzing psychological aspects of morality</span>
            </div>
            <div class="form-group">
                <label>2. Which category of ethics focuses on the consequences of actions?</label>
                <input type="radio" name="q2" value="A" required><span>A) Deontological ethics</span><br>
                <input type="radio" name="q2" value="B"><span>B) Teleological ethics</span><br>
                <input type="radio" name="q2" value="C"><span>C) Virtue ethics</span><br>
                <input type="radio" name="q2" value="D"><span>D) Meta-ethics</span>
            </div>
            <div class="form-group">
                <label>3. What does utilitarianism primarily emphasize?</label>
                <input type="radio" name="q3" value="A" required><span>A) Duty and rules</span><br>
                <input type="radio" name="q3" value="B"><span>B) Character traits</span><br>
                <input type="radio" name="q3" value="C"><span>C) Greatest happiness for the greatest number</span><br>
                <input type="radio" name="q3" value="D"><span>D) Divine commands</span>
            </div>
            <div class="form-group">
                <label>4. Who is a key proponent of classical utilitarianism?</label>
                <input type="radio" name="q4" value="A" required><span>A) Immanuel Kant</span><br>
                <input type="radio" name="q4" value="B"><span>B) Jeremy Bentham</span><br>
                <input type="radio" name="q4" value="C"><span>C) Aristotle</span><br>
                <input type="radio" name="q4" value="D"><span>D) John Rawls</span>
            </div>
            <div class="form-group">
                <label>5. How does John Stuart Mill modify Bentham's utilitarianism?</label> <!-- Corrected -->
                <input type="radio" name="q5" value="A" required><span>A) By focusing on duty over happiness</span><br>
                <input type="radio" name="q5" value="B"><span>B) By emphasizing quality of pleasure over quantity</span><br>
                <input type="radio" name="q5" value="C"><span>C) By rejecting consequences as a moral basis</span><br>
                <input type="radio" name="q5" value="D"><span>D) By prioritizing individual rights</span>
            </div>
            <div class="form-group">
                <label>6. What is a key feature of act-utilitarianism?</label>
                <input type="radio" name="q6" value="A" required><span>A) Following strict moral rules</span><br>
                <input type="radio" name="q6" value="B"><span>B) Judging each action by its consequences</span><br>
                <input type="radio" name="q6" value="C"><span>C) Focusing on character development</span><br>
                <input type="radio" name="q6" value="D"><span>D) Adhering to divine laws</span>
            </div>
            <div class="form-group">
                <label>7. What does rule-utilitarianism prioritize?</label>
                <input type="radio" name="q7" value="A" required><span>A) Individual actions</span><br>
                <input type="radio" name="q7" value="B"><span>B) General rules that maximize happiness</span><br>
                <input type="radio" name="q7" value="C"><span>C) Personal virtues</span><br>
                <input type="radio" name="q7" value="D"><span>D) Absolute duties</span>
            </div>
            <div class="form-group">
                <label>8. What is a common criticism of utilitarianism?</label>
                <input type="radio" name="q8" value="A" required><span>A) It ignores consequences</span><br>
                <input type="radio" name="q8" value="B"><span>B) It may justify harming minorities for the majority</span><br>
                <input type="radio" name="q8" value="C"><span>C) It focuses too much on duty</span><br>
                <input type="radio" name="q8" value="D"><span>D) It rejects happiness as a goal</span>
            </div>
            <div class="form-group">
                <label>9. Which theory is considered non-consequentialist?</label>
                <input type="radio" name="q9" value="A" required><span>A) Utilitarianism</span><br>
                <input type="radio" name="q9" value="B"><span>B) Deontological ethics</span><br>
                <input type="radio" name="q9" value="C"><span>C) Virtue ethics</span><br>
                <input type="radio" name="q9" value="D"><span>D) Ethical egoism</span>
            </div>
            <div class="form-group">
                <label>10. What is the basis of deontological ethics?</label>
                <input type="radio" name="q10" value="A" required><span>A) Outcomes of actions</span><br>
                <input type="radio" name="q10" value="B"><span>B) Duty and moral rules</span><br>
                <input type="radio" name="q10" value="C"><span>C) Personal happiness</span><br>
                <input type="radio" name="q10" value="D"><span>D) Social contracts</span>
            </div>
            <div class="form-group">
                <label>11. Who developed the categorical imperative?</label>
                <input type="radio" name="q11" value="A" required><span>A) Jeremy Bentham</span><br>
                <input type="radio" name="q11" value="B"><span>B) Immanuel Kant</span><br>
                <input type="radio" name="q11" value="C"><span>C) John Stuart Mill</span><br>
                <input type="radio" name="q11" value="D"><span>D) Aristotle</span>
            </div>
            <div class="form-group">
                <label>12. What does Kant's categorical imperative state?</label> <!-- Corrected -->
                <input type="radio" name="q12" value="A" required><span>A) Maximize happiness for all</span><br>
                <input type="radio" name="q12" value="B"><span>B) Act only according to rules you can universalize</span><br>
                <input type="radio" name="q12" value="C"><span>C) Pursue personal virtue</span><br>
                <input type="radio" name="q12" value="D"><span>D) Follow divine commands</span>
            </div>
            <div class="form-group">
                <label>13. What is a key principle of Kantian ethics?</label>
                <input type="radio" name="q13" value="A" required><span>A) Ends justify the means</span><br>
                <input type="radio" name="q13" value="B"><span>B) Treat people as ends, not means</span><br>
                <input type="radio" name="q13" value="C"><span>C) Happiness is the ultimate goal</span><br>
                <input type="radio" name="q13" value="D"><span>D) Rules are flexible</span>
            </div>
            <div class="form-group">
                <label>14. What does the divine command theory assert?</label>
                <input type="radio" name="q14" value="A" required><span>A) Morality comes from human reason</span><br>
                <input type="radio" name="q14" value="B"><span>B) Morality is based on God's will</span><br> <!-- Corrected -->
                <input type="radio" name="q14" value="C"><span>C) Morality depends on consequences</span><br>
                <input type="radio" name="q14" value="D"><span>D) Morality is about personal virtues</span>
            </div>
            <div class="form-group">
                <label>15. What is a criticism of the divine command theory?</label>
                <input type="radio" name="q15" value="A" required><span>A) It ignores divine will</span><br>
                <input type="radio" name="q15" value="B"><span>B) It raises the question of whether God's commands are arbitrary</span><br> <!-- Corrected -->
                <input type="radio" name="q15" value="C"><span>C) It focuses too much on happiness</span><br>
                <input type="radio" name="q15" value="D"><span>D) It rejects moral duties</span>
            </div>
            <div class="form-group">
                <label>16. What does rights theory emphasize?</label>
                <input type="radio" name="q16" value="A" required><span>A) Consequences of actions</span><br>
                <input type="radio" name="q16" value="B"><span>B) Inherent rights of individuals</span><br>
                <input type="radio" name="q16" value="C"><span>C) Virtue development</span><br>
                <input type="radio" name="q16" value="D"><span>D) Social utility</span>
            </div>
            <div class="form-group">
                <label>17. What are Ross's prima facie duties?</label> <!-- Corrected -->
                <input type="radio" name="q17" value="A" required><span>A) Absolute rules to follow</span><br>
                <input type="radio" name="q17" value="B"><span>B) Conditional duties that can conflict</span><br>
                <input type="radio" name="q17" value="C"><span>C) Duties based on happiness</span><br>
                <input type="radio" name="q17" value="D"><span>D) Duties derived from virtues</span>
            </div>
            <div class="form-group">
                <label>18. What is the focus of virtue ethics?</label>
                <input type="radio" name="q18" value="A" required><span>A) Rules and duties</span><br>
                <input type="radio" name="q18" value="B"><span>B) Consequences of actions</span><br>
                <input type="radio" name="q18" value="C"><span>C) Character and moral virtues</span><br>
                <input type="radio" name="q18" value="D"><span>D) Divine commandments</span>
            </div>
            <div class="form-group">
                <label>19. Who is a foundational figure in virtue ethics?</label>
                <input type="radio" name="q19" value="A" required><span>A) Kant</span><br>
                <input type="radio" name="q19" value="B"><span>B) Bentham</span><br>
                <input type="radio" name="q19" value="C"><span>C) Aristotle</span><br>
                <input type="radio" name="q19" value="D"><span>D) Mill</span>
            </div>
            <div class="form-group">
                <label>20. What is Aristotle's concept of the 'golden mean'?</label> <!-- Corrected -->
                <input type="radio" name="q20" value="A" required><span>A) Maximizing pleasure</span><br>
                <input type="radio" name="q20" value="B"><span>B) Balancing virtues between extremes</span><br>
                <input type="radio" name="q20" value="C"><span>C) Following strict rules</span><br>
                <input type="radio" name="q20" value="D"><span>D) Obeying divine laws</span>
            </div>
             <div class="form-group">
                <label>21. What does eudaimonia mean in Aristotle's ethics?</label> <!-- Corrected -->
                <input type="radio" name="q21" value="A" required><span>A) Wealth</span><br>
                <input type="radio" name="q21" value="B"><span>B) Happiness or flourishing</span><br>
                <input type="radio" name="q21" value="C"><span>C) Duty fulfillment</span><br>
                <input type="radio" name="q21" value="D"><span>D) Social harmony</span>
            </div>
            <div class="form-group">
                <label>22. What is a criticism of virtue ethics?</label>
                <input type="radio" name="q22" value="A" required><span>A) It ignores character</span><br>
                <input type="radio" name="q22" value="B"><span>B) It lacks clear action guidance</span><br>
                <input type="radio" name="q22" value="C"><span>C) It focuses too much on rules</span><br>
                <input type="radio" name="q22" value="D"><span>D) It prioritizes consequences</span>
            </div>
            <div class="form-group">
                <label>23. What does meta-ethics study?</label>
                <input type="radio" name="q23" value="A" required><span>A) How to act morally</span><br>
                <input type="radio" name="q23" value="B"><span>B) The nature and meaning of moral judgments</span><br>
                <input type="radio" name="q23" value="C"><span>C) Consequences of actions</span><br>
                <input type="radio" name="q23" value="D"><span>D) Character traits</span>
            </div>
            <div class="form-group">
                <label>24. What does cognitivism in meta-ethics assert?</label>
                <input type="radio" name="q24" value="A" required><span>A) Moral statements are meaningless</span><br>
                <input type="radio" name="q24" value="B"><span>B) Moral statements express beliefs that can be true or false</span><br>
                <input type="radio" name="q24" value="C"><span>C) Morality is purely emotional</span><br>
                <input type="radio" name="q24" value="D"><span>D) Morality is subjective</span>
            </div>
            <div class="form-group">
                <label>25. What is non-cognitivism in meta-ethics?</label>
                <input type="radio" name="q25" value="A" required><span>A) Moral statements are factual</span><br>
                <input type="radio" name="q25" value="B"><span>B) Moral statements express emotions, not truths</span><br>
                <input type="radio" name="q25" value="C"><span>C) Morality is universal</span><br>
                <input type="radio" name="q25" value="D"><span>D) Morality is based on reason</span>
            </div>
            <div class="form-group">
                <label>26. What does moral realism claim?</label>
                <input type="radio" name="q26" value="A" required><span>A) Moral truths are subjective</span><br>
                <input type="radio" name="q26" value="B"><span>B) Moral facts exist independently of human thought</span><br>
                <input type="radio" name="q26" value="C"><span>C) Morality is an illusion</span><br>
                <input type="radio" name="q26" value="D"><span>D) Moral judgments are emotional</span>
            </div>
            <div class="form-group">
                <label>27. What is Mackie's error theory?</label> <!-- Corrected -->
                <input type="radio" name="q27" value="A" required><span>A) Moral facts exist universally</span><br>
                <input type="radio" name="q27" value="B"><span>B) Moral judgments claim objective truth but are false</span><br>
                <input type="radio" name="q27" value="C"><span>C) Morality is based on divine will</span><br>
                <input type="radio" name="q27" value="D"><span>D) Moral statements are subjective</span>
            </div>
            <div class="form-group">
                <label>28. What does ethical egoism advocate?</label> <!-- Corrected -->
                <input type="radio" name="q28" value="A" required><span>A) Acting for the common good</span><br>
                <input type="radio" name="q28" value="B"><span>B) Pursuing one's own self-interest</span><br> <!-- Corrected -->
                <input type="radio" name="q28" value="C"><span>C) Following universal rules</span><br>
                <input type="radio" name="q28" value="D"><span>D) Developing virtues</span>
            </div>
            <div class="form-group">
                <label>29. What is a key criticism of ethical egoism?</label>
                <input type="radio" name="q29" value="A" required><span>A) It ignores self-interest</span><br>
                <input type="radio" name="q29" value="B"><span>B) It may conflict with social cooperation</span><br>
                <input type="radio" name="q29" value="C"><span>C) It focuses too much on duty</span><br>
                <input type="radio" name="q29" value="D"><span>D) It rejects consequences</span>
            </div>
            <div class="form-group">
                <label>30. What does altruism emphasize?</label> <!-- Corrected -->
                <input type="radio" name="q30" value="A" required><span>A) Self-interest</span><br>
                <input type="radio" name="q30" value="B"><span>B) Concern for others' well-being</span><br> <!-- Corrected -->
                <input type="radio" name="q30" value="C"><span>C) Strict rule-following</span><br>
                <input type="radio" name="q30" value="D"><span>D) Personal virtues</span>
            </div>
            <div class="form-group">
                <label>31. What is the focus of teleological ethics?</label>
                <input type="radio" name="q31" value="A" required><span>A) Duty</span><br>
                <input type="radio" name="q31" value="B"><span>B) Consequences</span><br>
                <input type="radio" name="q31" value="C"><span>C) Character</span><br>
                <input type="radio" name="q31" value="D"><span>D) Divine will</span>
            </div>
            <div class="form-group">
                <label>32. What does hedonism consider the highest good?</label>
                <input type="radio" name="q32" value="A" required><span>A) Duty</span><br>
                <input type="radio" name="q32" value="B"><span>B) Pleasure</span><br>
                <input type="radio" name="q32" value="C"><span>C) Virtue</span><br>
                <input type="radio" name="q32" value="D"><span>D) Justice</span>
            </div>
            <div class="form-group">
                <label>33. What is a strength of deontological ethics?</label>
                <input type="radio" name="q33" value="A" required><span>A) It focuses on outcomes</span><br>
                <input type="radio" name="q33" value="B"><span>B) It provides clear moral rules</span><br>
                <input type="radio" name="q33" value="C"><span>C) It emphasizes happiness</span><br>
                <input type="radio" name="q33" value="D"><span>D) It prioritizes virtues</span>
            </div>
            <div class="form-group">
                <label>34. What is a limitation of Kantian ethics?</label>
                <input type="radio" name="q34" value="A" required><span>A) It ignores duty</span><br>
                <input type="radio" name="q34" value="B"><span>B) It may lead to rigid rule-following</span><br>
                <input type="radio" name="q34" value="C"><span>C) It focuses on pleasure</span><br>
                <input type="radio" name="q34" value="D"><span>D) It rejects universal principles</span>
            </div>
            <div class="form-group">
                <label>35. What does moral relativism assert?</label>
                <input type="radio" name="q35" value="A" required><span>A) Moral truths are universal</span><br>
                <input type="radio" name="q35" value="B"><span>B) Morality varies by culture or individual</span><br>
                <input type="radio" name="q35" value="C"><span>C) Morality is objective</span><br>
                <input type="radio" name="q35" value="D"><span>D) Morality is divine</span>
            </div>
            <div class="form-group">
                <label>36. What is a criticism of moral relativism?</label>
                <input type="radio" name="q36" value="A" required><span>A) It promotes universal standards</span><br>
                <input type="radio" name="q36" value="B"><span>B) It struggles to judge harmful practices</span><br>
                <input type="radio" name="q36" value="C"><span>C) It focuses on consequences</span><br>
                <input type="radio" name="q36" value="D"><span>D) It emphasizes duty</span>
            </div>
            <div class="form-group">
                <label>37. What does moral absolutism claim?</label>
                <input type="radio" name="q37" value="A" required><span>A) Morality is relative</span><br>
                <input type="radio" name="q37" value="B"><span>B) Certain moral principles are universally true</span><br>
                <input type="radio" name="q37" value="C"><span>C) Morality depends on outcomes</span><br>
                <input type="radio" name="q37" value="D"><span>D) Morality is subjective</span>
            </div>
            <div class="form-group">
                <label>38. What is the social contract theory?</label>
                <input type="radio" name="q38" value="A" required><span>A) Morality comes from divine commands</span><br>
                <input type="radio" name="q38" value="B"><span>B) Morality arises from mutual agreements</span><br>
                <input type="radio" name="q38" value="C"><span>C) Morality is about personal virtues</span><br>
                <input type="radio" name="q38" value="D"><span>D) Morality focuses on happiness</span>
            </div>
            <div class="form-group">
                <label>39. Who is a key thinker in social contract theory?</label>
                <input type="radio" name="q39" value="A" required><span>A) Aristotle</span><br>
                <input type="radio" name="q39" value="B"><span>B) Thomas Hobbes</span><br>
                <input type="radio" name="q39" value="C"><span>C) Jeremy Bentham</span><br>
                <input type="radio" name="q39" value="D"><span>D) Immanuel Kant</span>
            </div>
            <div class="form-group">
                <label>40. What does Hobbes believe about human nature?</label>
                <input type="radio" name="q40" value="A" required><span>A) Naturally altruistic</span><br>
                <input type="radio" name="q40" value="B"><span>B) Naturally selfish and brutal</span><br>
                <input type="radio" name="q40" value="C"><span>C) Naturally virtuous</span><br>
                <input type="radio" name="q40" value="D"><span>D) Naturally rational</span>
            </div>
            <div class="form-group">
                <label>41. What is John Rawls' 'veil of ignorance'?</label> <!-- Corrected -->
                <input type="radio" name="q41" value="A" required><span>A) A tool for maximizing happiness</span><br>
                <input type="radio" name="q41" value="B"><span>B) A thought experiment for fair principles</span><br>
                <input type="radio" name="q41" value="C"><span>C) A rule for duty-based ethics</span><br>
                <input type="radio" name="q41" value="D"><span>D) A virtue-based concept</span>
            </div>
            <div class="form-group">
                <label>42. What does ethical pluralism suggest?</label>
                <input type="radio" name="q42" value="A" required><span>A) One moral theory is correct</span><br>
                <input type="radio" name="q42" value="B"><span>B) Multiple moral principles can coexist</span><br>
                <input type="radio" name="q42" value="C"><span>C) Morality is subjective</span><br>
                <input type="radio" name="q42" value="D"><span>D) Morality is divine</span>
            </div>
            <div class="form-group">
                <label>43. What is a strength of ethical pluralism?</label>
                <input type="radio" name="q43" value="A" required><span>A) It simplifies moral decisions</span><br>
                <input type="radio" name="q43" value="B"><span>B) It accommodates diverse perspectives</span><br>
                <input type="radio" name="q43" value="C"><span>C) It rejects all theories</span><br>
                <input type="radio" name="q43" value="D"><span>D) It focuses on one principle</span>
            </div>
            <div class="form-group">
                <label>44. What does emotivism claim about moral statements?</label>
                <input type="radio" name="q44" value="A" required><span>A) They are objective truths</span><br>
                <input type="radio" name="q44" value="B"><span>B) They express feelings or attitudes</span><br>
                <input type="radio" name="q44" value="C"><span>C) They are universal laws</span><br>
                <input type="radio" name="q44" value="D"><span>D) They are based on reason</span>
            </div>
            <div class="form-group">
                <label>45. What is a limitation of emotivism?</label>
                <input type="radio" name="q45" value="A" required><span>A) It overemphasizes reason</span><br>
                <input type="radio" name="q45" value="B"><span>B) It struggles to resolve moral disagreements</span><br>
                <input type="radio" name="q45" value="C"><span>C) It focuses on duty</span><br>
                <input type="radio" name="q45" value="D"><span>D) It rejects emotions</span>
            </div>
            <div class="form-group">
                <label>46. What does prescriptivism in meta-ethics propose?</label>
                <input type="radio" name="q46" value="A" required><span>A) Moral statements are descriptive</span><br>
                <input type="radio" name="q46" value="B"><span>B) Moral statements are commands or prescriptions</span><br>
                <input type="radio" name="q46" value="C"><span>C) Morality is objective</span><br>
                <input type="radio" name="q46" value="D"><span>D) Morality is emotional</span>
            </div>
            <div class="form-group">
                <label>47. What is a key idea in natural law theory?</label>
                <input type="radio" name="q47" value="A" required><span>A) Morality is human-made</span><br>
                <input type="radio" name="q47" value="B"><span>B) Morality aligns with natural order</span><br>
                <input type="radio" name="q47" value="C"><span>C) Morality is relative</span><br>
                <input type="radio" name="q47" value="D"><span>D) Morality is about pleasure</span>
            </div>
            <div class="form-group">
                <label>48. Who is associated with natural law theory?</label>
                <input type="radio" name="q48" value="A" required><span>A) Thomas Aquinas</span><br>
                <input type="radio" name="q48" value="B"><span>B) John Stuart Mill</span><br>
                <input type="radio" name="q48" value="C"><span>C) Immanuel Kant</span><br>
                <input type="radio" name="q48" value="D"><span>D) Jeremy Bentham</span>
            </div>
            <div class="form-group">
                <label>49. What does care ethics emphasize?</label>
                <input type="radio" name="q49" value="A" required><span>A) Rules and duties</span><br>
                <input type="radio" name="q49" value="B"><span>B) Relationships and empathy</span><br>
                <input type="radio" name="q49" value="C"><span>C) Consequences</span><br>
                <input type="radio" name="q49" value="D"><span>D) Universal laws</span>
            </div>
            <div class="form-group">
                <label>50. What is a criticism of care ethics?</label>
                <input type="radio" name="q50" value="A" required><span>A) It ignores relationships</span><br>
                <input type="radio" name="q50" value="B"><span>B) It may lack impartiality</span><br>
                <input type="radio" name="q50" value="C"><span>C) It focuses on rules</span><br>
                <input type="radio" name="q50" value="D"><span>D) It rejects empathy</span>
            </div>


            <button type="button" onclick="showReview()">Submit</button>
        </form>
        <div id="error-message" class="hidden">
            <p>Something went wrong. Please try again.</p>
        </div>
    </div>

    <div id="review-section" class="hidden">
        <h2>Review Your Answers</h2>
        <div id="review-content"></div>
        <button onclick="editForm()">Edit</button>
        <button onclick="downloadResponse()" id="download-response">Download My Response</button>
        <button onclick="confirmSubmission()">Confirm Submission</button>
    </div>

    <div id="submission-copy" class="hidden">
        <h2>Your Submitted Answers</h2>
        <div id="submission-content"></div>
        <button onclick="proceedToPassword()">Proceed</button>
    </div>

    <div id="password-section" class="hidden">
        <h1 id="success-message">Your response has been submitted</h1>
        <p>You can view your result (score) by entering the password.</p>
        <input type="password" id="password" placeholder="Enter password">
        <button onclick="checkPassword()">Submit</button>
        <p id="password-error" class="hidden">Incorrect password. Please try again.</p>
    </div>

    <div id="results" class="hidden">
        <h1>Quiz Results</h1>
        <p id="student-info"></p>
        <div id="answers"></div>
        <p id="score"></p>
        <button id="download-pdf" onclick="downloadPDF()">Download Results PDF</button>
    </div>

    <script>
        let quizData = null;
        let formData = null;
        const { jsPDF } = window.jspdf;
        const TOTAL_QUESTIONS = 50; // Updated Total number of questions

        // Valid login credentials
        const validCredentials = [
            { username: 'section19', password: '123' },
            { username: 'section20', password: '123' },
            { username: 'muzemuza', password: 'moh' },
            { username: 'section21', password: '123' }
            // Add more valid credentials as needed
        ];

        // Structure holding question texts and choices for Chapter 2
        // Corrected all possessive apostrophes (')
        const allQuestionsData = {
            q1: { text: "What is the primary focus of normative ethics?", choices: { A: "Defining the meaning of moral terms", B: "Studying the nature of moral judgments", C: "Providing guidelines for what people should do", D: "Analyzing psychological aspects of morality" } },
            q2: { text: "Which category of ethics focuses on the consequences of actions?", choices: { A: "Deontological ethics", B: "Teleological ethics", C: "Virtue ethics", D: "Meta-ethics" } },
            q3: { text: "What does utilitarianism primarily emphasize?", choices: { A: "Duty and rules", B: "Character traits", C: "Greatest happiness for the greatest number", D: "Divine commands" } },
            q4: { text: "Who is a key proponent of classical utilitarianism?", choices: { A: "Immanuel Kant", B: "Jeremy Bentham", C: "Aristotle", D: "John Rawls" } },
            q5: { text: "How does John Stuart Mill modify Bentham's utilitarianism?", choices: { A: "By focusing on duty over happiness", B: "By emphasizing quality of pleasure over quantity", C: "By rejecting consequences as a moral basis", D: "By prioritizing individual rights" } }, // Corrected 's
            q6: { text: "What is a key feature of act-utilitarianism?", choices: { A: "Following strict moral rules", B: "Judging each action by its consequences", C: "Focusing on character development", D: "Adhering to divine laws" } },
            q7: { text: "What does rule-utilitarianism prioritize?", choices: { A: "Individual actions", B: "General rules that maximize happiness", C: "Personal virtues", D: "Absolute duties" } },
            q8: { text: "What is a common criticism of utilitarianism?", choices: { A: "It ignores consequences", B: "It may justify harming minorities for the majority", C: "It focuses too much on duty", D: "It rejects happiness as a goal" } },
            q9: { text: "Which theory is considered non-consequentialist?", choices: { A: "Utilitarianism", B: "Deontological ethics", C: "Virtue ethics", D: "Ethical egoism" } },
            q10: { text: "What is the basis of deontological ethics?", choices: { A: "Outcomes of actions", B: "Duty and moral rules", C: "Personal happiness", D: "Social contracts" } },
            q11: { text: "Who developed the categorical imperative?", choices: { A: "Jeremy Bentham", B: "Immanuel Kant", C: "John Stuart Mill", D: "Aristotle" } },
            q12: { text: "What does Kant's categorical imperative state?", choices: { A: "Maximize happiness for all", B: "Act only according to rules you can universalize", C: "Pursue personal virtue", D: "Follow divine commands" } }, // Corrected 's
            q13: { text: "What is a key principle of Kantian ethics?", choices: { A: "Ends justify the means", B: "Treat people as ends, not means", C: "Happiness is the ultimate goal", D: "Rules are flexible" } },
            q14: { text: "What does the divine command theory assert?", choices: { A: "Morality comes from human reason", B: "Morality is based on God's will", C: "Morality depends on consequences", D: "Morality is about personal virtues" } }, // Corrected 's
            q15: { text: "What is a criticism of the divine command theory?", choices: { A: "It ignores divine will", B: "It raises the question of whether God's commands are arbitrary", C: "It focuses too much on happiness", D: "It rejects moral duties" } }, // Corrected 's
            q16: { text: "What does rights theory emphasize?", choices: { A: "Consequences of actions", B: "Inherent rights of individuals", C: "Virtue development", D: "Social utility" } },
            q17: { text: "What are Ross's prima facie duties?", choices: { A: "Absolute rules to follow", B: "Conditional duties that can conflict", C: "Duties based on happiness", D: "Duties derived from virtues" } }, // Corrected 's
            q18: { text: "What is the focus of virtue ethics?", choices: { A: "Rules and duties", B: "Consequences of actions", C: "Character and moral virtues", D: "Divine commandments" } },
            q19: { text: "Who is a foundational figure in virtue ethics?", choices: { A: "Kant", B: "Bentham", C: "Aristotle", D: "Mill" } },
            q20: { text: "What is Aristotle's concept of the 'golden mean'?", choices: { A: "Maximizing pleasure", B: "Balancing virtues between extremes", C: "Following strict rules", D: "Obeying divine laws" } }, // Corrected 's
            q21: { text: "What does eudaimonia mean in Aristotle's ethics?", choices: { A: "Wealth", B: "Happiness or flourishing", C: "Duty fulfillment", D: "Social harmony" } }, // Corrected 's
            q22: { text: "What is a criticism of virtue ethics?", choices: { A: "It ignores character", B: "It lacks clear action guidance", C: "It focuses too much on rules", D: "It prioritizes consequences" } },
            q23: { text: "What does meta-ethics study?", choices: { A: "How to act morally", B: "The nature and meaning of moral judgments", C: "Consequences of actions", D: "Character traits" } },
            q24: { text: "What does cognitivism in meta-ethics assert?", choices: { A: "Moral statements are meaningless", B: "Moral statements express beliefs that can be true or false", C: "Morality is purely emotional", D: "Morality is subjective" } },
            q25: { text: "What is non-cognitivism in meta-ethics?", choices: { A: "Moral statements are factual", B: "Moral statements express emotions, not truths", C: "Morality is universal", D: "Morality is based on reason" } },
            q26: { text: "What does moral realism claim?", choices: { A: "Moral truths are subjective", B: "Moral facts exist independently of human thought", C: "Morality is an illusion", D: "Moral judgments are emotional" } },
            q27: { text: "What is Mackie's error theory?", choices: { A: "Moral facts exist universally", B: "Moral judgments claim objective truth but are false", C: "Morality is based on divine will", D: "Moral statements are subjective" } }, // Corrected 's
            q28: { text: "What does ethical egoism advocate?", choices: { A: "Acting for the common good", B: "Pursuing one's own self-interest", C: "Following universal rules", D: "Developing virtues" } }, // Corrected 's in choice B
            q29: { text: "What is a key criticism of ethical egoism?", choices: { A: "It ignores self-interest", B: "It may conflict with social cooperation", C: "It focuses too much on duty", D: "It rejects consequences" } },
            q30: { text: "What does altruism emphasize?", choices: { A: "Self-interest", B: "Concern for others' well-being", C: "Strict rule-following", D: "Personal virtues" } }, // Corrected 's in choice B
            q31: { text: "What is the focus of teleological ethics?", choices: { A: "Duty", B: "Consequences", C: "Character", D: "Divine will" } },
            q32: { text: "What does hedonism consider the highest good?", choices: { A: "Duty", B: "Pleasure", C: "Virtue", D: "Justice" } },
            q33: { text: "What is a strength of deontological ethics?", choices: { A: "It focuses on outcomes", B: "It provides clear moral rules", C: "It emphasizes happiness", D: "It prioritizes virtues" } },
            q34: { text: "What is a limitation of Kantian ethics?", choices: { A: "It ignores duty", B: "It may lead to rigid rule-following", C: "It focuses on pleasure", D: "It rejects universal principles" } },
            q35: { text: "What does moral relativism assert?", choices: { A: "Moral truths are universal", B: "Morality varies by culture or individual", C: "Morality is objective", D: "Morality is divine" } },
            q36: { text: "What is a criticism of moral relativism?", choices: { A: "It promotes universal standards", B: "It struggles to judge harmful practices", C: "It focuses on consequences", D: "It emphasizes duty" } },
            q37: { text: "What does moral absolutism claim?", choices: { A: "Morality is relative", B: "Certain moral principles are universally true", C: "Morality depends on outcomes", D: "Morality is subjective" } },
            q38: { text: "What is the social contract theory?", choices: { A: "Morality comes from divine commands", B: "Morality arises from mutual agreements", C: "Morality is about personal virtues", D: "Morality focuses on happiness" } },
            q39: { text: "Who is a key thinker in social contract theory?", choices: { A: "Aristotle", B: "Thomas Hobbes", C: "Jeremy Bentham", D: "Immanuel Kant" } },
            q40: { text: "What does Hobbes believe about human nature?", choices: { A: "Naturally altruistic", B: "Naturally selfish and brutal", C: "Naturally virtuous", D: "Naturally rational" } },
            q41: { text: "What is John Rawls' 'veil of ignorance'?", choices: { A: "A tool for maximizing happiness", B: "A thought experiment for fair principles", C: "A rule for duty-based ethics", D: "A virtue-based concept" } }, // Corrected 's
            q42: { text: "What does ethical pluralism suggest?", choices: { A: "One moral theory is correct", B: "Multiple moral principles can coexist", C: "Morality is subjective", D: "Morality is divine" } },
            q43: { text: "What is a strength of ethical pluralism?", choices: { A: "It simplifies moral decisions", B: "It accommodates diverse perspectives", C: "It rejects all theories", D: "It focuses on one principle" } },
            q44: { text: "What does emotivism claim about moral statements?", choices: { A: "They are objective truths", B: "They express feelings or attitudes", C: "They are universal laws", D: "They are based on reason" } },
            q45: { text: "What is a limitation of emotivism?", choices: { A: "It overemphasizes reason", B: "It struggles to resolve moral disagreements", C: "It focuses on duty", D: "It rejects emotions" } },
            q46: { text: "What does prescriptivism in meta-ethics propose?", choices: { A: "Moral statements are descriptive", B: "Moral statements are commands or prescriptions", C: "Morality is objective", D: "Morality is emotional" } },
            q47: { text: "What is a key idea in natural law theory?", choices: { A: "Morality is human-made", B: "Morality aligns with natural order", C: "Morality is relative", D: "Morality is about pleasure" } },
            q48: { text: "Who is associated with natural law theory?", choices: { A: "Thomas Aquinas", B: "John Stuart Mill", C: "Immanuel Kant", D: "Jeremy Bentham" } },
            q49: { text: "What does care ethics emphasize?", choices: { A: "Rules and duties", B: "Relationships and empathy", C: "Consequences", D: "Universal laws" } },
            q50: { text: "What is a criticism of care ethics?", choices: { A: "It ignores relationships", B: "It may lack impartiality", C: "It focuses on rules", D: "It rejects empathy" } }
        };


        // Correct answers mapped to letters for Chapter 2
        const correctAnswersMap = {
             q1: 'C',  q2: 'B',  q3: 'C',  q4: 'B',  q5: 'B',
             q6: 'B',  q7: 'B',  q8: 'B',  q9: 'B', q10: 'B',
            q11: 'B', q12: 'B', q13: 'B', q14: 'B', q15: 'B',
            q16: 'B', q17: 'B', q18: 'C', q19: 'C', q20: 'B',
            q21: 'B', q22: 'B', q23: 'B', q24: 'B', q25: 'B',
            q26: 'B', q27: 'B', q28: 'B', q29: 'B', q30: 'B',
            q31: 'B', q32: 'B', q33: 'B', q34: 'B', q35: 'B',
            q36: 'B', q37: 'B', q38: 'B', q39: 'B', q40: 'B',
            q41: 'B', q42: 'B', q43: 'B', q44: 'B', q45: 'B',
            q46: 'B', q47: 'B', q48: 'A', q49: 'B', q50: 'B'
        };


        // --- Functions (checkLogin, showReview, editForm, downloadResponse, confirmSubmission, etc.) ---
        // No changes needed in the function logic itself for this fix.

        function checkLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('login-password').value.trim();
            const errorMessage = document.getElementById('login-error');
            const loginSection = document.getElementById('login-section');
            const quizForm = document.getElementById('quiz-form');

            const isValid = validCredentials.some(cred =>
                cred.username === username && cred.password === password
            );

            if (isValid) {
                errorMessage.classList.add('hidden');
                loginSection.classList.add('hidden');
                quizForm.classList.remove('hidden');
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function showReview() {
            const form = document.getElementById('mcie-quiz-ch2');
            formData = new FormData(form);
            const data = Object.fromEntries(formData);

             let allAnswered = true;
             for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 if (!data[`q${i}`]) {
                     allAnswered = false;
                     break;
                 }
             }

             if (!data.name || !data.id_number || !data.section || !data.email || !data.phone || !allAnswered) {
                 alert('Please fill in all personal information and answer all questions before submitting.');
                 return;
             }

            quizData = {
                name: data.name,
                id_number: data.id_number,
                section: data.section,
                email: data.email,
                phone: data.phone,
                answers: {},
                questions: allQuestionsData
            };

            let reviewHTML = `
                <p><strong>Name:</strong> ${data.name}</p>
                <p><strong>ID Number:</strong> ${data.id_number}</p>
                <p><strong>Section:</strong> ${data.section}</p>
                <p><strong>Email:</strong> ${data.email}</p>
                <p><strong>Phone Number:</strong> ${data.phone}</p>
                <hr>
                <h3>Your Answers:</h3>
            `;

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const qKey = `q${i}`;
                const userAnswer = data[qKey];
                 if (!userAnswer) {
                    quizData.answers[qKey] = 'Not Answered';
                    reviewHTML += `<p><strong>Question ${i}:</strong> ${allQuestionsData[qKey].text}<br>Your answer: Not Answered</p>`;
                 } else {
                    quizData.answers[qKey] = userAnswer;
                    const questionInfo = allQuestionsData[qKey];
                    const answerText = questionInfo.choices[userAnswer];
                    reviewHTML += `<p><strong>Question ${i}:</strong> ${questionInfo.text}<br>Your answer: ${userAnswer}) ${answerText}</p>`;
                 }
            }

            const reviewContent = document.getElementById('review-content');
            reviewContent.innerHTML = reviewHTML;

            document.getElementById('quiz-form').classList.add('hidden');
            document.getElementById('review-section').classList.remove('hidden');
        }

        function editForm() {
            document.getElementById('review-section').classList.add('hidden');
            document.getElementById('quiz-form').classList.remove('hidden');
        }

        function downloadResponse() {
            if (!quizData) return;

            const doc = new jsPDF();
            let y = 10;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 10;
            const lineHeight = 7;
            const questionSpacing = 5;
            const answerSpacing = 10;

            doc.setFontSize(16);
            doc.text('MCIE Chapter 2 Quiz Response', margin, y);
            y += 10;

            doc.setFontSize(12);
            doc.text(`Name: ${quizData.name}`, margin, y); y += lineHeight;
            doc.text(`ID: ${quizData.id_number}`, margin, y); y += lineHeight;
            doc.text(`Section: ${quizData.section}`, margin, y); y += lineHeight;
            doc.text(`Email: ${quizData.email}`, margin, y); y += lineHeight;
            doc.text(`Phone: ${quizData.phone}`, margin, y); y += 10;

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const qKey = `q${i}`;
                const question = quizData.questions[qKey];
                const userAnswer = quizData.answers[qKey];
                const answerText = userAnswer !== 'Not Answered' ? question.choices[userAnswer] : 'Not Answered';

                const questionText = `Question ${i}: ${question.text}`;
                const questionLines = doc.splitTextToSize(questionText, doc.internal.pageSize.width - margin * 2);
                const neededHeight = (questionLines.length * 5) + questionSpacing + lineHeight + answerSpacing;

                 if (y + neededHeight > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                }

                doc.text(questionLines, margin, y);
                y += (questionLines.length * 5) + questionSpacing;

                 if (y > pageHeight - margin) { doc.addPage(); y = margin; }
                doc.text(`Your answer: ${userAnswer !== 'Not Answered' ? userAnswer + ') ' : ''}${answerText}`, margin, y);
                y += answerSpacing;
            }

            doc.save(`quiz_ch2_response_${quizData.id_number}.pdf`);
        }

        async function confirmSubmission() {
            if (confirm('Are you sure you want to submit your answers?')) {
                if (!quizData || !formData) {
                     console.error("Quiz data or form data is missing.");
                     alert("Error: Cannot submit. Please try filling the form again.");
                     editForm();
                     return;
                }

                const data = Object.fromEntries(formData);

                let score = 0;
                for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                    const qKey = `q${i}`;
                    if (data[qKey] && data[qKey] === correctAnswersMap[qKey]) {
                        score++;
                    }
                }
                quizData.score = score;

                 const answersForSubmission = {};
                 for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                     answersForSubmission[`q${i}`] = data[`q${i}`] || 'Not Answered';
                 }

                const submissionData = {
                    quizTitle: "MCIE Chapter 2 Quiz",
                    name: data.name,
                    id_number: data.id_number,
                    section: data.section,
                    email: data.email,
                    phone: data.phone,
                    ...answersForSubmission,
                    score: score,
                    totalQuestions: TOTAL_QUESTIONS,
                    submittedAt: new Date().toISOString()
                };

                try {
                    const response = await fetch('https://formspree.io/f/myzeoejq', {
                        method: 'POST',
                        body: JSON.stringify(submissionData),
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                    });

                    if (response.ok) {
                        const submissionContent = document.getElementById('submission-content');
                         let submissionHTML = `
                            <p><strong>Name:</strong> ${quizData.name}</p>
                            <p><strong>ID Number:</strong> ${quizData.id_number}</p>
                            <p><strong>Section:</strong> ${quizData.section}</p>
                            <p><strong>Email:</strong> ${quizData.email}</p>
                            <p><strong>Phone Number:</strong> ${quizData.phone}</p>
                            <hr>
                            <h3>Submitted Answers:</h3>
                        `;
                         for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                             const qKey = `q${i}`;
                             const questionInfo = quizData.questions[qKey];
                             const userAnswer = quizData.answers[qKey];
                             const answerText = userAnswer !== 'Not Answered' ? questionInfo.choices[userAnswer] : 'Not Answered';
                             submissionHTML += `<p><strong>Question ${i}:</strong> ${questionInfo.text}<br>Your answer: ${userAnswer !== 'Not Answered' ? userAnswer + ') ' : ''}${answerText}</p>`;
                         }
                        submissionContent.innerHTML = submissionHTML;

                        document.getElementById('review-section').classList.add('hidden');
                        document.getElementById('submission-copy').classList.remove('hidden');
                    } else {
                        const errorData = await response.json();
                        console.error('Formspree error:', errorData);
                        document.getElementById('error-message').innerHTML = `<p>Submission failed: ${errorData.error || 'Please try again.'}</p>`;
                        document.getElementById('error-message').classList.remove('hidden');
                        document.getElementById('review-section').classList.add('hidden');
                    }
                } catch (error) {
                    console.error('Submission error:', error);
                    document.getElementById('error-message').innerHTML = `<p>An network error occurred during submission. Please check your connection and try again.</p>`;
                    document.getElementById('error-message').classList.remove('hidden');
                    document.getElementById('review-section').classList.add('hidden');
                }
            }
        }

        function proceedToPassword() {
            document.getElementById('submission-copy').classList.add('hidden');
            document.getElementById('password-section').classList.remove('hidden');
        }

        function checkPassword() {
            const passwordInput = document.getElementById('password').value;
            const correctPassword = 'password';
            const errorMessage = document.getElementById('password-error');
            const passwordSection = document.getElementById('password-section');
            const results = document.getElementById('results');

            if (passwordInput === correctPassword) {
                errorMessage.classList.add('hidden');
                passwordSection.classList.add('hidden');
                results.classList.remove('hidden');
                displayResults();
            } else {
                errorMessage.classList.remove('hidden');
            }
        }

        function displayResults() {
            if (!quizData) {
                document.getElementById('results').innerHTML = '<p>Error: No quiz data found. Please complete the quiz first.</p>';
                return;
            }

             const displayCorrectAnswers = {};
             for(let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const correctLetter = correctAnswersMap[qKey];
                 const correctText = allQuestionsData[qKey] ? allQuestionsData[qKey].choices[correctLetter] : 'N/A';
                 displayCorrectAnswers[qKey] = `${correctLetter} (${correctText})`;
             }

            document.getElementById('student-info').innerHTML = `<strong>Name:</strong> ${quizData.name}<br><strong>ID:</strong> ${quizData.id_number}<br><strong>Section:</strong> ${quizData.section}<br><strong>Email:</strong> ${quizData.email}<br><strong>Phone:</strong> ${quizData.phone}`;

            const answersDiv = document.getElementById('answers');
            let answersHTML = '<h3>Detailed Results:</h3>';

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const question = quizData.questions[qKey];
                 const userAnswer = quizData.answers[qKey];
                 const userAnswerText = userAnswer !== 'Not Answered' ? question.choices[userAnswer] : 'Not Answered';
                 const isCorrect = userAnswer === correctAnswersMap[qKey];

                 answersHTML += `
                    <div class="question-result">
                        <p><strong>Question ${i}:</strong> ${question.text}</p>
                        <div class="choices">
                            <p>A) ${question.choices.A}</p>
                            <p>B) ${question.choices.B}</p>
                            <p>C) ${question.choices.C}</p>
                            <p>D) ${question.choices.D}</p>
                        </div>
                        <p>Your answer: ${userAnswer !== 'Not Answered' ? userAnswer + ') ' : ''}${userAnswerText} ${isCorrect ? '<span style="color:green; font-weight:bold;">(Correct)</span>' : '<span style="color:red; font-weight:bold;">(Incorrect)</span>'}</p>
                        <p>Correct answer: ${displayCorrectAnswers[qKey]}</p>
                    </div>
                `;
            }
            answersDiv.innerHTML = answersHTML;

            document.getElementById('score').textContent = `Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`;
        }

        function downloadPDF() {
            if (!quizData) return;

            const doc = new jsPDF();
            let y = 10;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 10;
            const lineHeight = 7;
            const questionSpacing = 5;
            const answerSpacing = 7;
            const questionBlockSpacing = 10;

             const displayCorrectAnswers = {};
             for(let i = 1; i <= TOTAL_QUESTIONS; i++) {
                 const qKey = `q${i}`;
                 const correctLetter = correctAnswersMap[qKey];
                 const correctText = allQuestionsData[qKey] ? allQuestionsData[qKey].choices[correctLetter] : 'N/A';
                 displayCorrectAnswers[qKey] = `${correctLetter} (${correctText})`;
             }

            doc.setFontSize(16);
            doc.text('MCIE Chapter 2 Quiz Results', doc.internal.pageSize.width / 2, y, { align: 'center' });
            y += 10;

            doc.setFontSize(12);
            doc.text(`Name: ${quizData.name}`, margin, y); y += lineHeight;
            doc.text(`ID: ${quizData.id_number}`, margin, y); y += lineHeight;
            doc.text(`Section: ${quizData.section}`, margin, y); y += lineHeight;
            doc.text(`Email: ${quizData.email}`, margin, y); y += lineHeight;
            doc.text(`Phone: ${quizData.phone}`, margin, y); y += 10;

            doc.setFont('helvetica', 'bold');
            doc.text(`Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`, doc.internal.pageSize.width / 2, y, { align: 'center' });
            y += 10;
            doc.setFont('helvetica', 'normal');

            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const qKey = `q${i}`;
                const question = quizData.questions[qKey];
                const userAnswer = quizData.answers[qKey];
                const userAnswerText = userAnswer !== 'Not Answered' ? question.choices[userAnswer] : 'Not Answered';
                const isCorrect = userAnswer === correctAnswersMap[qKey];

                const questionText = `Question ${i}: ${question.text}`;
                const questionLines = doc.splitTextToSize(questionText, doc.internal.pageSize.width - margin * 2);

                const choicesHeight = 4 * 5 + answerSpacing;
                const answerLinesHeight = 2 * lineHeight + questionBlockSpacing;
                const neededHeight = (questionLines.length * 5) + questionSpacing + choicesHeight + answerLinesHeight;

                if (y + neededHeight > pageHeight - margin) {
                    doc.addPage();
                    y = margin;
                }

                doc.setFont('helvetica', 'bold');
                doc.text(questionLines, margin, y);
                y += (questionLines.length * 5) + questionSpacing;
                doc.setFont('helvetica', 'normal');

                if (y + choicesHeight + answerLinesHeight > pageHeight - margin) { doc.addPage(); y = margin; }

                doc.text(`Choices:`, margin, y); y += 5;
                doc.text(`  A) ${question.choices.A}`, margin, y); y += 5;
                doc.text(`  B) ${question.choices.B}`, margin, y); y += 5;
                doc.text(`  C) ${question.choices.C}`, margin, y); y += 5;
                doc.text(`  D) ${question.choices.D}`, margin, y); y += answerSpacing;

                doc.text(`Your answer: ${userAnswer !== 'Not Answered' ? userAnswer + ') ' : ''}${userAnswerText} ${isCorrect ? '(Correct)' : '(Incorrect)'}`, margin, y); y += lineHeight;
                doc.text(`Correct answer: ${displayCorrectAnswers[qKey]}`, margin, y); y += questionBlockSpacing;
            }

            if (y > pageHeight - margin) { doc.addPage(); y = margin; }
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text(`Final Score: ${quizData.score} / ${TOTAL_QUESTIONS}`, doc.internal.pageSize.width / 2, y, { align: 'center' });

            doc.save(`quiz_ch2_results_${quizData.id_number}.pdf`);
        }
    </script>
</body>
</html>